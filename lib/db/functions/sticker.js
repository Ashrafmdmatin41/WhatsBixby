/*Copyright (C) 2024 DX-MODS.
Licensed under the MIT License;
you may not use this file except in compliance with the License.
WhatsBixby - Ziyan
*/

function BixbyInc_0x42a6(_0x3bc975,_0x50a1d3){const _0x3ea146=BixbyInc_0x3ea1();return BixbyInc_0x42a6=function(_0x42a68d,_0x23a5ff){_0x42a68d=_0x42a68d-0xb0;let _0x5d737e=_0x3ea146[_0x42a68d];return _0x5d737e;},BixbyInc_0x42a6(_0x3bc975,_0x50a1d3);}function BixbyInc_0x3ea1(){const _0x5b4c3b=['-vcodec','crypto','node-webpmux','1091065duViIi','8lRTKbS','concat','unlinkSync','7521zKNxWv','author','addOutputOptions','toString','load','.jpg','stringify','.webp','utf-8','508cPEFxm','end','from','packname','default','.mp4','exif','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','randomBytes','readFileSync','save','53610UeMtTj','2951244WqeUbH','path','00:00:00','139415KKsTVg','5338802tOMlUk','categories','toFormat','3421JoyewR','libwebp','webp','-vf','exports','12gBVeaP','join','-ss','readUIntLE','https://github.com/Neeraj-x0/x-asena','writeFileSync','3940960nAKgqL','writeUIntLE','-vsync','Image','error'];BixbyInc_0x3ea1=function(){return _0x5b4c3b;};return BixbyInc_0x3ea1();}const BixbyInc_0x895dec=BixbyInc_0x42a6;(function(_0x4f1d0b,_0x9fb87d){const _0x3bf505=BixbyInc_0x42a6,_0x6a2a19=_0x4f1d0b();while(!![]){try{const _0x149c49=parseInt(_0x3bf505(0xd1))/0x1*(parseInt(_0x3bf505(0xb6))/0x2)+-parseInt(_0x3bf505(0xb9))/0x3*(-parseInt(_0x3bf505(0xc2))/0x4)+-parseInt(_0x3bf505(0xb5))/0x5*(parseInt(_0x3bf505(0xda))/0x6)+-parseInt(_0x3bf505(0xd2))/0x7+-parseInt(_0x3bf505(0xe0))/0x8+-parseInt(_0x3bf505(0xce))/0x9+parseInt(_0x3bf505(0xcd))/0xa*(parseInt(_0x3bf505(0xd5))/0xb);if(_0x149c49===_0x9fb87d)break;else _0x6a2a19['push'](_0x6a2a19['shift']());}catch(_0x20a059){_0x6a2a19['push'](_0x6a2a19['shift']());}}}(BixbyInc_0x3ea1,0x7fd98));const fs=require('fs'),{tmpdir}=require('os'),Crypto=require(BixbyInc_0x895dec(0xb3)),ff=require('./myffmpeg'),webp=require(BixbyInc_0x895dec(0xb4)),path=require(BixbyInc_0x895dec(0xcf));async function imageToWebp(_0x291854){const _0x425b5f=BixbyInc_0x895dec,_0xfd8a2e=path[_0x425b5f(0xdb)](tmpdir(),Crypto[_0x425b5f(0xca)](0x6)[_0x425b5f(0xdd)](0x0,0x6)['toString'](0x24)+_0x425b5f(0xc0)),_0x4235a2=path[_0x425b5f(0xdb)](tmpdir(),Crypto['randomBytes'](0x6)[_0x425b5f(0xdd)](0x0,0x6)[_0x425b5f(0xbc)](0x24)+_0x425b5f(0xbe));fs[_0x425b5f(0xdf)](_0x4235a2,_0x291854),await new Promise((_0x3635b1,_0x114924)=>{const _0x3ada84=_0x425b5f;ff(_0x4235a2)['on'](_0x3ada84(0xb1),_0x114924)['on'](_0x3ada84(0xc3),()=>_0x3635b1(!![]))['addOutputOptions']([_0x3ada84(0xb2),_0x3ada84(0xd6),_0x3ada84(0xd8),_0x3ada84(0xc9)])[_0x3ada84(0xd4)]('webp')[_0x3ada84(0xcc)](_0xfd8a2e);});const _0x372667=fs[_0x425b5f(0xcb)](_0xfd8a2e);return fs[_0x425b5f(0xb8)](_0xfd8a2e),fs[_0x425b5f(0xb8)](_0x4235a2),_0x372667;}async function videoToWebp(_0x2a353d){const _0x2e56de=BixbyInc_0x895dec,_0x130a33=path[_0x2e56de(0xdb)](tmpdir(),Crypto[_0x2e56de(0xca)](0x6)[_0x2e56de(0xdd)](0x0,0x6)[_0x2e56de(0xbc)](0x24)+_0x2e56de(0xc0)),_0x455b6a=path[_0x2e56de(0xdb)](tmpdir(),Crypto[_0x2e56de(0xca)](0x6)[_0x2e56de(0xdd)](0x0,0x6)[_0x2e56de(0xbc)](0x24)+_0x2e56de(0xc7));fs['writeFileSync'](_0x455b6a,_0x2a353d),await new Promise((_0x596cc7,_0x1e86fd)=>{const _0x48711e=_0x2e56de;ff(_0x455b6a)['on'](_0x48711e(0xb1),_0x1e86fd)['on'](_0x48711e(0xc3),()=>_0x596cc7(!![]))[_0x48711e(0xbb)](['-vcodec','libwebp',_0x48711e(0xd8),'scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','-loop','0',_0x48711e(0xdc),_0x48711e(0xd0),'-t','00:00:05','-preset',_0x48711e(0xc6),'-an',_0x48711e(0xe2),'0'])[_0x48711e(0xd4)](_0x48711e(0xd7))['save'](_0x130a33);});const _0x5c6c0a=fs[_0x2e56de(0xcb)](_0x130a33);return fs[_0x2e56de(0xb8)](_0x130a33),fs[_0x2e56de(0xb8)](_0x455b6a),_0x5c6c0a;}async function writeExifImg(_0x1209c3,_0x1a3367){const _0x445c1f=BixbyInc_0x895dec;let _0x55dc80=await imageToWebp(_0x1209c3);const _0x2e6a68=path[_0x445c1f(0xdb)](tmpdir(),Crypto['randomBytes'](0x6)[_0x445c1f(0xdd)](0x0,0x6)[_0x445c1f(0xbc)](0x24)+_0x445c1f(0xc0)),_0x49227c=path[_0x445c1f(0xdb)](tmpdir(),Crypto['randomBytes'](0x6)['readUIntLE'](0x0,0x6)[_0x445c1f(0xbc)](0x24)+_0x445c1f(0xc0));fs[_0x445c1f(0xdf)](_0x2e6a68,_0x55dc80);if(_0x1a3367['packname']||_0x1a3367[_0x445c1f(0xba)]){const _0x4914a3=new webp[(_0x445c1f(0xb0))](),_0x5ccada={'sticker-pack-id':'https://github.com/Neeraj-x0/x-asena','sticker-pack-name':_0x1a3367[_0x445c1f(0xc5)],'sticker-pack-publisher':_0x1a3367[_0x445c1f(0xba)],'emojis':_0x1a3367[_0x445c1f(0xd3)]?_0x1a3367[_0x445c1f(0xd3)]:['']},_0x191dbe=Buffer[_0x445c1f(0xc4)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x17c21f=Buffer[_0x445c1f(0xc4)](JSON[_0x445c1f(0xbf)](_0x5ccada),_0x445c1f(0xc1)),_0x1d592a=Buffer[_0x445c1f(0xb7)]([_0x191dbe,_0x17c21f]);return _0x1d592a[_0x445c1f(0xe1)](_0x17c21f['length'],0xe,0x4),await _0x4914a3['load'](_0x2e6a68),fs['unlinkSync'](_0x2e6a68),_0x4914a3[_0x445c1f(0xc8)]=_0x1d592a,await _0x4914a3[_0x445c1f(0xcc)](_0x49227c),_0x49227c;}}async function writeExifVid(_0x25db35,_0x58bedb){const _0x46a293=BixbyInc_0x895dec;let _0x41ab66=await videoToWebp(_0x25db35);const _0x3ff795=path[_0x46a293(0xdb)](tmpdir(),Crypto[_0x46a293(0xca)](0x6)[_0x46a293(0xdd)](0x0,0x6)[_0x46a293(0xbc)](0x24)+_0x46a293(0xc0)),_0x60f730=path[_0x46a293(0xdb)](tmpdir(),Crypto[_0x46a293(0xca)](0x6)[_0x46a293(0xdd)](0x0,0x6)[_0x46a293(0xbc)](0x24)+'.webp');fs['writeFileSync'](_0x3ff795,_0x41ab66);if(_0x58bedb[_0x46a293(0xc5)]||_0x58bedb[_0x46a293(0xba)]){const _0x2703b5=new webp[(_0x46a293(0xb0))](),_0x549c96={'sticker-pack-id':_0x46a293(0xde),'sticker-pack-name':_0x58bedb[_0x46a293(0xc5)],'sticker-pack-publisher':_0x58bedb[_0x46a293(0xba)],'emojis':_0x58bedb[_0x46a293(0xd3)]?_0x58bedb['categories']:['']},_0xd564d1=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x57aab4=Buffer['from'](JSON[_0x46a293(0xbf)](_0x549c96),_0x46a293(0xc1)),_0x2c545e=Buffer[_0x46a293(0xb7)]([_0xd564d1,_0x57aab4]);return _0x2c545e[_0x46a293(0xe1)](_0x57aab4['length'],0xe,0x4),await _0x2703b5[_0x46a293(0xbd)](_0x3ff795),fs[_0x46a293(0xb8)](_0x3ff795),_0x2703b5[_0x46a293(0xc8)]=_0x2c545e,await _0x2703b5[_0x46a293(0xcc)](_0x60f730),_0x60f730;}}async function writeExifWebp(_0x27bfee,_0x2e17e3){const _0x2a7217=BixbyInc_0x895dec,_0x3cfa00=path[_0x2a7217(0xdb)](tmpdir(),Crypto[_0x2a7217(0xca)](0x6)[_0x2a7217(0xdd)](0x0,0x6)[_0x2a7217(0xbc)](0x24)+'.webp'),_0x151f80=path[_0x2a7217(0xdb)](tmpdir(),Crypto[_0x2a7217(0xca)](0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+_0x2a7217(0xc0));fs[_0x2a7217(0xdf)](_0x3cfa00,_0x27bfee);if(_0x2e17e3[_0x2a7217(0xc5)]||_0x2e17e3[_0x2a7217(0xba)]){const _0x1b712d=new webp[(_0x2a7217(0xb0))](),_0x4d1165={'sticker-pack-id':'https://github.com/Neeraj-x0/x-asena','sticker-pack-name':_0x2e17e3[_0x2a7217(0xc5)],'sticker-pack-publisher':_0x2e17e3['author'],'emojis':_0x2e17e3[_0x2a7217(0xd3)]?_0x2e17e3['categories']:['']},_0x53bf15=await Buffer[_0x2a7217(0xc4)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x54f299=await Buffer[_0x2a7217(0xc4)](JSON[_0x2a7217(0xbf)](_0x4d1165),_0x2a7217(0xc1)),_0x1d5627=await Buffer[_0x2a7217(0xb7)]([_0x53bf15,_0x54f299]);return await _0x1d5627[_0x2a7217(0xe1)](_0x54f299['length'],0xe,0x4),await _0x1b712d[_0x2a7217(0xbd)](_0x3cfa00),fs[_0x2a7217(0xb8)](_0x3cfa00),_0x1b712d[_0x2a7217(0xc8)]=_0x1d5627,await _0x1b712d[_0x2a7217(0xcc)](_0x151f80),_0x151f80;}}module[BixbyInc_0x895dec(0xd9)]={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExifWebp':writeExifWebp};