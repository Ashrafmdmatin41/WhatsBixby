/*Copyright (C) 2024 DX-MODS.
Licensed under the MIT License;
you may not use this file except in compliance with the License.
WhatsBixby - Ziyan
*/

function _0x54e9(_0x5f5027,_0x568c89){const _0xff4b2=_0xff4b();return _0x54e9=function(_0x54e909,_0x1e243f){_0x54e909=_0x54e909-0x12e;let _0x3cdb32=_0xff4b2[_0x54e909];return _0x3cdb32;},_0x54e9(_0x5f5027,_0x568c89);}const _0x103dc6=_0x54e9;(function(_0x222ed9,_0x10bbdf){const _0x2b5dd3=_0x54e9,_0x37498c=_0x222ed9();while(!![]){try{const _0x23e644=-parseInt(_0x2b5dd3(0x153))/0x1*(parseInt(_0x2b5dd3(0x178))/0x2)+-parseInt(_0x2b5dd3(0x162))/0x3+-parseInt(_0x2b5dd3(0x176))/0x4+parseInt(_0x2b5dd3(0x13f))/0x5*(parseInt(_0x2b5dd3(0x140))/0x6)+-parseInt(_0x2b5dd3(0x15a))/0x7+-parseInt(_0x2b5dd3(0x14a))/0x8+parseInt(_0x2b5dd3(0x192))/0x9;if(_0x23e644===_0x10bbdf)break;else _0x37498c['push'](_0x37498c['shift']());}catch(_0x1977a8){_0x37498c['push'](_0x37498c['shift']());}}}(_0xff4b,0xd65af));const {default:makeWASocket,Browsers,makeInMemoryStore,useMultiFileAuthState}=require(_0x103dc6(0x155)),fs=require('fs'),{serialize}=require('./lib/serialize'),{Message,Image,Sticker}=require(_0x103dc6(0x130)),express=require(_0x103dc6(0x18b)),app=express(),port=process['env']['PORT']||0x1f40,pino=require(_0x103dc6(0x189)),path=require(_0x103dc6(0x16a)),events=require(_0x103dc6(0x181)),got=require(_0x103dc6(0x139)),config=require('./config'),{BASE_URL,PORT}=require(_0x103dc6(0x172)),{PluginDB}=require(_0x103dc6(0x136)),Greetings=require(_0x103dc6(0x132)),{async}=require('q'),{decodeJid}=require(_0x103dc6(0x144)),store=makeInMemoryStore({'logger':pino()[_0x103dc6(0x150)]({'level':'silent','stream':'store'})});require(_0x103dc6(0x16c))['EventEmitter'][_0x103dc6(0x169)]=0x0;const aes256=require('aes256');let plaintext=config[_0x103dc6(0x14d)][_0x103dc6(0x17d)]('bixby~',''),key=_0x103dc6(0x190),decryptedPlainText=aes256[_0x103dc6(0x183)](key,plaintext);async function md(){const _0x2314b0=_0x103dc6;let {body:_0x4f3fb6}=await got(BASE_URL+_0x2314b0(0x14c)+decryptedPlainText),_0x4dd2c5=JSON[_0x2314b0(0x165)](_0x4f3fb6)['result'][0x0][_0x2314b0(0x191)];fs['writeFileSync'](_0x2314b0(0x16e),_0x4dd2c5);}function _0xff4b(){const _0x1cb055=['dataValues','./lib/Greetings','At\x20:\x20','writeToFile','writeFileSync','./lib/db/plugins','subject','.js','got','bind','```','type','commands','isSelf','1141685VSpMCf','42BtnsmI','includes','imageMessage','silent','./lib/','toLowerCase','test','name','notify','photo','13070688EytXXY','stringify','session?id=','SESSION_ID','```WhatsBixby\x20Running\x20\x0aversion\x20:\x20','stickerMessage','child','get','\x0aMessage:','305AzSHcr','trim','@whiskeysockets/baileys','slice','\x0aFrom\x20:\x20','\x0aWorktype:\x20','group-participants.update','343427AoReGC','message','map','endsWith','user','./lib/store.json','groupMetadata','readdirSync','2254302iHfFQp','forEach','./plugins/','parse','WORK_TYPE','sender','\x0aTotal\x20Plugins\x20:\x20','defaultMaxListeners','path','connection.update','events','contacts','./lib/auth_info_baileys/creds.json','text','/plugins','WhatsBixby\x20Active!','./config','close','length','⬇️\x20\x20Installing\x20Plugins...','4087700BHgBsG','sendMessage','8242QsFKME','split','messages.upsert','version','body','replaceAll','listen','@g.us','url','./lib/events','✅\x20Login\x20Successful!','decrypt','\x0a\x0a\x0a\x0a\x0a','log','replace','open','function','pino','contacts.update','express','/package.json','macOS','store','from','bixbyneverdies','data','35935209IRnTmp','shift','messages','Desktop','Connection\x20closed\x20with\x20bot.\x20Please\x20put\x20New\x20Session\x20ID\x20again.','LOGS','⬇️\x20Installing\x20External\x20Plugins...','/plugins/','fromMe','SUDO','prefix','./lib/Base'];_0xff4b=function(){return _0x1cb055;};return _0xff4b();}md(),fs['readdirSync'](__dirname+'/plugins/')[_0x103dc6(0x163)](_0x9df7df=>{const _0xfa0ddf=_0x103dc6;path['extname'](_0x9df7df)['toLowerCase']()==_0xfa0ddf(0x138)&&require(__dirname+_0xfa0ddf(0x199)+_0x9df7df);});async function Bixby(){const _0x38cb1f=_0x103dc6,{state:_0xbbbdd0,saveCreds:_0x16543b}=await useMultiFileAuthState('./lib/auth_info_baileys/',pino({'level':_0x38cb1f(0x143)}));await config['DATABASE']['sync']();let _0x2103f4=makeWASocket({'logger':pino({'level':_0x38cb1f(0x143)}),'auth':_0xbbbdd0,'printQRInTerminal':!![],'generateHighQualityLinkPreview':!![],'browser':Browsers[_0x38cb1f(0x18d)](_0x38cb1f(0x195)),'fireInitQueries':![],'shouldSyncHistoryMessage':![],'downloadHistory':![],'syncFullHistory':![],'getMessage':async _0x45cd2=>(store['loadMessage'](_0x45cd2['id'])||{})[_0x38cb1f(0x15b)]||{'conversation':null}});store[_0x38cb1f(0x13a)](_0x2103f4['ev']),setInterval(()=>{const _0x157a76=_0x38cb1f;store[_0x157a76(0x134)](_0x157a76(0x15f));},0x1e*0x3e8),_0x2103f4['ev']['on']('creds.update',_0x16543b),_0x2103f4['ev']['on'](_0x38cb1f(0x18a),_0x420622=>{const _0x1ec171=_0x38cb1f;for(let _0x363fd8 of _0x420622){let _0x2ed94a=decodeJid(_0x363fd8['id']);if(store&&store[_0x1ec171(0x16d)])store[_0x1ec171(0x16d)][_0x2ed94a]={'id':_0x2ed94a,'name':_0x363fd8['notify']};}}),_0x2103f4['ev']['on'](_0x38cb1f(0x16b),async _0x5c6a0a=>{const _0x99d7e5=_0x38cb1f,{connection:_0x153529,lastDisconnect:_0x4c2a0c}=_0x5c6a0a;_0x153529==='connecting'&&console[_0x99d7e5(0x185)]('WhatsBixby\x202.0.1');if(_0x153529===_0x99d7e5(0x187)){console[_0x99d7e5(0x185)](_0x99d7e5(0x182)),console['log'](_0x99d7e5(0x198));let _0x1d13ec=await PluginDB['findAll']();_0x1d13ec[_0x99d7e5(0x15c)](async _0x495c72=>{const _0x436b65=_0x99d7e5;if(!fs['existsSync'](_0x436b65(0x164)+_0x495c72['dataValues']['name']+'.js')){console[_0x436b65(0x185)](_0x495c72[_0x436b65(0x131)]['name']);var _0x139b60=await got(_0x495c72[_0x436b65(0x131)][_0x436b65(0x180)]);_0x139b60['statusCode']==0xc8&&(fs[_0x436b65(0x135)]('./plugins/'+_0x495c72[_0x436b65(0x131)][_0x436b65(0x147)]+_0x436b65(0x138),_0x139b60[_0x436b65(0x17c)]),require(__dirname+_0x436b65(0x199)+_0x495c72[_0x436b65(0x131)][_0x436b65(0x147)]+_0x436b65(0x138)));}}),console[_0x99d7e5(0x185)](_0x99d7e5(0x175)),fs[_0x99d7e5(0x161)](__dirname+_0x99d7e5(0x170))['forEach'](_0x3b78d1=>{const _0x330124=_0x99d7e5;path['extname'](_0x3b78d1)[_0x330124(0x145)]()==_0x330124(0x138)&&require(__dirname+_0x330124(0x199)+_0x3b78d1);}),console[_0x99d7e5(0x185)]('✅\x20Plugins\x20Installed!');let _0x1acadd=_0x99d7e5(0x14e)+require(__dirname+_0x99d7e5(0x18c))[_0x99d7e5(0x17b)]+_0x99d7e5(0x168)+events[_0x99d7e5(0x13d)][_0x99d7e5(0x174)]+_0x99d7e5(0x158)+config[_0x99d7e5(0x166)]+_0x99d7e5(0x13b);_0x2103f4[_0x99d7e5(0x177)](_0x2103f4['user']['id'],{'text':_0x1acadd});try{_0x2103f4['ev']['on'](_0x99d7e5(0x159),async _0x951f8d=>{Greetings(_0x951f8d,_0x2103f4);}),_0x2103f4['ev']['on'](_0x99d7e5(0x17a),async _0x30ed08=>{const _0x4ca269=_0x99d7e5;if(_0x30ed08[_0x4ca269(0x13c)]!==_0x4ca269(0x148))return;const _0x392e96=_0x30ed08[_0x4ca269(0x194)][0x0];let _0x59137f=await serialize(JSON[_0x4ca269(0x165)](JSON[_0x4ca269(0x14b)](_0x392e96)),_0x2103f4,store);if(!_0x59137f[_0x4ca269(0x15b)])return;if(_0x59137f['body'][0x1]&&_0x59137f[_0x4ca269(0x17c)][0x1]=='\x20')_0x59137f[_0x4ca269(0x17c)]=_0x59137f[_0x4ca269(0x17c)][0x0]+_0x59137f[_0x4ca269(0x17c)][_0x4ca269(0x156)](0x2);let _0x2a3a63=_0x59137f[_0x4ca269(0x17c)];_0x59137f[_0x4ca269(0x18e)]=store;if(_0x2a3a63&&config[_0x4ca269(0x197)])console[_0x4ca269(0x185)](_0x4ca269(0x133)+(_0x59137f[_0x4ca269(0x18f)][_0x4ca269(0x15d)](_0x4ca269(0x17f))?(await _0x2103f4[_0x4ca269(0x160)](_0x59137f[_0x4ca269(0x18f)]))[_0x4ca269(0x137)]:_0x59137f['from'])+_0x4ca269(0x157)+_0x59137f[_0x4ca269(0x167)]+_0x4ca269(0x152)+_0x2a3a63);events[_0x4ca269(0x13d)]['map'](async _0x5909ff=>{const _0x3481c8=_0x4ca269;if(_0x5909ff[_0x3481c8(0x19a)]&&!config[_0x3481c8(0x12e)][_0x3481c8(0x179)](',')[_0x3481c8(0x141)](_0x59137f[_0x3481c8(0x167)][_0x3481c8(0x179)]('@')[0x0]||!_0x59137f[_0x3481c8(0x13e)]))return;let _0x155504;_0x2a3a63&&(_0x155504=_0x2a3a63?_0x2a3a63[0x0]+_0x2a3a63['slice'](0x1)[_0x3481c8(0x154)]()['split']('\x20')[0x0][_0x3481c8(0x145)]():'',_0x59137f[_0x3481c8(0x12f)]=new RegExp(config['HANDLERS'])[_0x3481c8(0x146)](_0x2a3a63)?_0x2a3a63['split']('')[_0x3481c8(0x193)]():',');if(_0x5909ff['pattern']&&_0x5909ff['pattern'][_0x3481c8(0x146)](_0x155504)){var _0x500a45;try{_0x500a45=_0x2a3a63[_0x3481c8(0x186)](new RegExp(_0x155504,'i'),'')['trim']();}catch{_0x500a45=![];}whats=new Message(_0x2103f4,_0x59137f,_0x392e96),_0x5909ff[_0x3481c8(0x188)](whats,_0x500a45,_0x59137f,_0x2103f4);}else{if(_0x2a3a63&&_0x5909ff['on']===_0x3481c8(0x16f))whats=new Message(_0x2103f4,_0x59137f,_0x392e96),_0x5909ff[_0x3481c8(0x188)](whats,_0x2a3a63,_0x59137f,_0x2103f4,_0x30ed08);else{if((_0x5909ff['on']==='image'||_0x5909ff['on']===_0x3481c8(0x149))&&_0x59137f[_0x3481c8(0x13c)]===_0x3481c8(0x142))whats=new Image(_0x2103f4,_0x59137f,_0x392e96),_0x5909ff[_0x3481c8(0x188)](whats,_0x2a3a63,_0x59137f,_0x2103f4,_0x30ed08,_0x392e96);else _0x5909ff['on']==='sticker'&&_0x59137f[_0x3481c8(0x13c)]===_0x3481c8(0x14f)&&(whats=new Sticker(_0x2103f4,_0x59137f,_0x392e96),_0x5909ff[_0x3481c8(0x188)](whats,_0x59137f,_0x2103f4,_0x30ed08,_0x392e96));}}});});}catch(_0x32e170){console[_0x99d7e5(0x185)](_0x32e170+_0x99d7e5(0x184)+JSON['stringify'](msg));}}if(_0x153529===_0x99d7e5(0x173))console[_0x99d7e5(0x185)](_0x5c6a0a),console['log'](_0x99d7e5(0x196)),Bixby()['catch'](_0x2c3f2a=>console['log'](_0x2c3f2a));else{}}),process['on']('uncaughtException',async _0x4d1eec=>{const _0x2d098b=_0x38cb1f;let _0x3e69a2=_0x4d1eec[_0x2d098b(0x15b)];await _0x2103f4[_0x2d098b(0x177)](_0x2103f4[_0x2d098b(0x15e)]['id'],{'text':_0x3e69a2}),console['log'](_0x4d1eec);});}app[_0x103dc6(0x151)]('/',(_0x596731,_0x3e4c60)=>{const _0x277cfc=_0x103dc6;_0x3e4c60['send'](_0x277cfc(0x171));}),app[_0x103dc6(0x17e)](PORT,()=>console[_0x103dc6(0x185)](':'+PORT)),setTimeout(()=>{Bixby()['catch'](_0x366b0c=>console['log'](_0x366b0c));},0xbb8);
